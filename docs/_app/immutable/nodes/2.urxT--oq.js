import"../chunks/DsnmJJEf.js";import"../chunks/DDDzA6Kj.js";import{B as xe,x as z,aC as Ge,D as Se,y as Ke,w as Ue,O as A,R as Xe,z as Ye,H as ze,A as Ne,C as pe,L as ne,ak as Je,aK as Qe,F as Te,I as Ze,G as je,aH as He,i as $e,aN as er,af as Oe,aj as rr,J as We,K as ar,aR as tr,aS as ye,ar as Le,aT as nr,aU as sr,ax as lr,aV as fr,aG as ir,aW as vr,W as ur,a7 as oe,p as T,q as E,v,aa as me,aX as R,ab as O,ac as N,a9 as ve,ad as W,r as P,aQ as Pe,as as Ie,aP as j,a8 as Ve}from"../chunks/CNa5HW-J.js";import{s as se,a as or}from"../chunks/CFeZ4_Uq.js";import{i as D,p as ke,r as Fe,s as mr}from"../chunks/Bk6pgf5s.js";function cr(b,e){return e}function _r(b,e,a){for(var _=b.items,h=[],g=e.length,l=0;l<g;l++)fr(e[l].e,h,!0);var n=g>0&&h.length===0&&a!==null;if(n){var o=a.parentNode;ir(o),o.append(a),_.clear(),G(b,e[0].prev,e[g-1].next)}vr(h,()=>{for(var u=0;u<g;u++){var w=e[u];n||(_.delete(w.k),G(b,w.prev,w.next)),Le(w.e,!n)}})}function De(b,e,a,_,h,g=null){var l=b,n={flags:e,items:new Map,first:null};{var o=b;l=z?xe(Ge(o)):o.appendChild(Se())}z&&Ke();var u=null,w=!1,d=new Map,t=Xe(()=>{var s=a();return $e(s)?s:s==null?[]:He(s)}),c,m;function f(){dr(m,c,n,d,l,h,e,_,a),g!==null&&(c.length===0?u?We(u):u=Te(()=>g(l)):u!==null&&ar(u,()=>{u=null}))}Ue(()=>{m??=ur,c=A(t);var s=c.length;if(w&&s===0)return;w=s===0;let r=!1;if(z){var x=Ye(l)===ze;x!==(s===0)&&(l=Ne(),xe(l),pe(!1),r=!0)}if(z){for(var i=null,p,y=0;y<s;y++){if(ne.nodeType===Je&&ne.data===Qe){l=ne,r=!0,pe(!1);break}var I=c[y],C=_(I,y);p=Ae(ne,n,i,null,I,C,y,h,e,a),n.items.set(C,p),i=p}s>0&&xe(Ne())}if(z)s===0&&g&&(u=Te(()=>g(l)));else if(Ze()){var M=new Set,k=je;for(y=0;y<s;y+=1){I=c[y],C=_(I,y);var F=n.items.get(C)??d.get(C);F?qe(F,I,y):(p=Ae(null,n,null,null,I,C,y,h,e,a,!0),d.set(C,p)),M.add(C)}for(const[L,V]of n.items)M.has(L)||k.skipped_effects.add(V.e);k.add_callback(f)}else f();r&&pe(!0),A(t)}),z&&(l=ne)}function dr(b,e,a,_,h,g,l,n,o){var u=e.length,w=a.items,d=a.first,t=d,c,m=null,f=[],s=[],r,x,i,p;for(p=0;p<u;p+=1){if(r=e[p],x=n(r,p),i=w.get(x),i===void 0){var y=_.get(x);if(y!==void 0){_.delete(x),w.set(x,y);var I=m?m.next:t;G(a,m,y),G(a,y,I),we(y,I,h),m=y}else{var C=t?t.e.nodes_start:h;m=Ae(C,a,m,m===null?a.first:m.next,r,x,p,g,l,o)}w.set(x,m),f=[],s=[],t=m.next;continue}if(qe(i,r,p),(i.e.f&ye)!==0&&We(i.e),i!==t){if(c!==void 0&&c.has(i)){if(f.length<s.length){var M=s[0],k;m=M.prev;var F=f[0],L=f[f.length-1];for(k=0;k<f.length;k+=1)we(f[k],M,h);for(k=0;k<s.length;k+=1)c.delete(s[k]);G(a,F.prev,L.next),G(a,m,F),G(a,L,M),t=M,m=L,p-=1,f=[],s=[]}else c.delete(i),we(i,t,h),G(a,i.prev,i.next),G(a,i,m===null?a.first:m.next),G(a,m,i),m=i;continue}for(f=[],s=[];t!==null&&t.k!==x;)(t.e.f&ye)===0&&(c??=new Set).add(t),s.push(t),t=t.next;if(t===null)continue;i=t}f.push(i),m=i,t=i.next}if(t!==null||c!==void 0){for(var V=c===void 0?[]:He(c);t!==null;)(t.e.f&ye)===0&&V.push(t),t=t.next;var le=V.length;if(le>0){var ce=u===0?h:null;_r(a,V,ce)}}b.first=a.first&&a.first.e,b.last=m&&m.e;for(var _e of _.values())Le(_e.e);_.clear()}function qe(b,e,a,_){rr(b.v,e),b.i=a}function Ae(b,e,a,_,h,g,l,n,o,u,w){var d=(o&nr)!==0,t=(o&sr)===0,c=d?t?er(h,!1,!1):Oe(h):h,m=(o&tr)===0?l:Oe(l),f={i:m,v:c,k:g,a:null,e:null,prev:a,next:_};try{if(b===null){var s=document.createDocumentFragment();s.append(b=Se())}return f.e=Te(()=>n(b,c,m,u),z),f.e.prev=a&&a.e,f.e.next=_&&_.e,a===null?w||(e.first=f):(a.next=f,a.e.next=f.e),_!==null&&(_.prev=f,_.e.prev=f.e),f}finally{}}function we(b,e,a){for(var _=b.next?b.next.e.nodes_start:a,h=e?e.e.nodes_start:a,g=b.e.nodes_start;g!==null&&g!==_;){var l=lr(g);h.before(g),g=l}}function G(b,e,a){e===null?b.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var hr=R("<mn> </mn>"),gr=R("<mi> </mi>");function H(b,e){oe(e,!0);var a=T(),_=E(a);{var h=l=>{var n=hr(),o=O(n,!0);N(n),ve(()=>se(o,e.expr)),v(l,n)},g=l=>{var n=gr(),o=O(n,!0);N(n),ve(()=>se(o,e.expr)),v(l,n)};D(_,l=>{/^\d+$/.test(e.expr)?l(h):l(g,!1)})}v(b,a),me()}var br=R("<mfrac><!> <!></mfrac>");function xr(b,e){var a=br(),_=O(a);{var h=u=>{H(u,{get expr(){return e.numerator}})},g=u=>{var w=T(),d=E(w);P(d,()=>e.numerator),v(u,w)};D(_,u=>{typeof e.numerator=="string"?u(h):u(g,!1)})}var l=W(_,2);{var n=u=>{H(u,{get expr(){return e.denominator}})},o=u=>{var w=T(),d=E(w);P(d,()=>e.denominator),v(u,w)};D(l,u=>{typeof e.denominator=="string"?u(n):u(o,!1)})}N(a),v(b,a)}var pr=R("<mrow><!></mrow>"),yr=R("<math><mrow><!></mrow></math>");function ue(b,e){const a=ke(e,"bare",3,!1);var _=T(),h=E(_);{var g=n=>{var o=pr(),u=O(o);P(u,()=>e.children),N(o),v(n,o)},l=n=>{var o=yr(),u=O(o),w=O(u);P(w,()=>e.children),N(u),N(o),v(n,o)};D(h,n=>{a()?n(g):n(l,!1)})}v(b,_)}var wr=R("<mo><!></mo>"),Er=R("<!> <!> <!>",1);function Be(b,e){var a=Er(),_=E(a);{var h=d=>{H(d,{get expr(){return e.lhs}})},g=d=>{var t=T(),c=E(t);P(c,()=>e.lhs),v(d,t)};D(_,d=>{typeof e.lhs=="string"?d(h):d(g,!1)})}var l=W(_,2);{var n=d=>{var t=wr(),c=O(t);{var m=s=>{var r=Pe("Â·");v(s,r)},f=s=>{var r=Pe();ve(()=>se(r,e.operator)),v(s,r)};D(c,s=>{e.operator==="*"?s(m):s(f,!1)})}N(t),v(d,t)};D(l,d=>{e.operator&&d(n)})}var o=W(l,2);{var u=d=>{H(d,{get expr(){return e.rhs}})},w=d=>{var t=T(),c=E(t);P(c,()=>e.rhs),v(d,t)};D(o,d=>{typeof e.rhs=="string"?d(u):d(w,!1)})}v(b,a)}var Tr=R("<msubsup><!> <!> <!></msubsup>"),Dr=R("<msup><!> <!></msup>"),Ar=R("<msub><!> <!></msub>");function Ee(b,e){var a=T(),_=E(a);{var h=l=>{var n=Tr(),o=O(n);{var u=r=>{var x=T(),i=E(x);P(i,()=>e.children),v(r,x)},w=r=>{var x=T(),i=E(x);{var p=y=>{H(y,{get expr(){return e.base}})};D(i,y=>{e.base&&y(p)},!0)}v(r,x)};D(o,r=>{e.children?r(u):r(w,!1)})}var d=W(o,2);{var t=r=>{H(r,{get expr(){return e.sub}})},c=r=>{var x=T(),i=E(x);P(i,()=>e.sub),v(r,x)};D(d,r=>{typeof e.sub=="string"?r(t):r(c,!1)})}var m=W(d,2);{var f=r=>{H(r,{get expr(){return e.sup}})},s=r=>{var x=T(),i=E(x);P(i,()=>e.sup),v(r,x)};D(m,r=>{typeof e.sup=="string"?r(f):r(s,!1)})}N(n),v(l,n)},g=l=>{var n=T(),o=E(n);{var u=d=>{var t=Dr(),c=O(t);{var m=i=>{var p=T(),y=E(p);P(y,()=>e.children),v(i,p)},f=i=>{var p=T(),y=E(p);{var I=C=>{H(C,{get expr(){return e.base}})};D(y,C=>{e.base&&C(I)},!0)}v(i,p)};D(c,i=>{e.children?i(m):i(f,!1)})}var s=W(c,2);{var r=i=>{H(i,{get expr(){return e.sup}})},x=i=>{var p=T(),y=E(p);P(y,()=>e.sup),v(i,p)};D(s,i=>{typeof e.sup=="string"?i(r):i(x,!1)})}N(t),v(d,t)},w=d=>{var t=T(),c=E(t);{var m=s=>{var r=Ar(),x=O(r);{var i=M=>{var k=T(),F=E(k);P(F,()=>e.children),v(M,k)},p=M=>{var k=T(),F=E(k);{var L=V=>{H(V,{get expr(){return e.base}})};D(F,V=>{e.base&&V(L)},!0)}v(M,k)};D(x,M=>{e.children?M(i):M(p,!1)})}var y=W(x,2);{var I=M=>{H(M,{get expr(){return e.sub}})},C=M=>{var k=T(),F=E(k);P(F,()=>e.sub),v(M,k)};D(y,M=>{typeof e.sub=="string"?M(I):M(C,!1)})}N(r),v(s,r)},f=s=>{var r=T(),x=E(r);{var i=y=>{var I=T(),C=E(I);P(C,()=>e.children),v(y,I)},p=y=>{var I=T(),C=E(I);{var M=k=>{H(k,{get expr(){return e.base}})};D(C,k=>{e.base&&k(M)},!0)}v(y,I)};D(x,y=>{e.children?y(i):y(p,!1)},!0)}v(s,r)};D(c,s=>{e.sub?s(m):s(f,!1)},!0)}v(d,t)};D(o,d=>{e.sup?d(u):d(w,!1)},!0)}v(l,n)};D(_,l=>{e.sub&&e.sup?l(h):l(g,!1)})}v(b,a)}var Ir=R('<mtr><mtd style="padding-left:0em;padding-right:0em;"><!></mtd></mtr>'),kr=R('<math display="block" class="tml-display" style="display:block math;"><mrow><mo fence="true" form="prefix">(</mo> <mtable></mtable> <mo fence="true" form="postfix">)</mo></mrow></math>');function Z(b,e){const a=Fe(e,["$$slots","$$events","$$legacy"]);var _=kr(),h=O(_),g=W(O(h),2);De(g,21,()=>Object.values(a),cr,(l,n)=>{var o=Ir(),u=O(o),w=O(u);ue(w,{bare:!0,children:(d,t)=>{var c=T(),m=E(c);{var f=r=>{H(r,{get expr(){return A(n)}})},s=r=>{var x=T(),i=E(x);P(i,()=>A(n)),v(r,x)};D(m,r=>{typeof A(n)=="string"?r(f):r(s,!1)})}v(d,c)},$$slots:{default:!0}}),N(u),N(o),v(l,o)}),N(g),Ie(2),N(h),N(_),v(b,_)}var Mr=R('<mrow><mo fence="true" form="prefix"> </mo> <!> <mo fence="true" form="postfix"> </mo></mrow>');function Cr(b,e){oe(e,!0);const a=ke(e,"with",3,"()");var _=Mr(),h=O(_),g=O(h,!0);N(h);var l=W(h,2);P(l,()=>e.children);var n=W(l,2),o=O(n,!0);N(n),N(_),ve(()=>{se(g,a()[0]),se(o,a()[1])}),v(b,_),me()}function S(b,e){oe(e,!0);const a=ke(e,"bare",3,!1),_=/^([\p{Letter}0-9]+)$/u;function h(t,c,m){return t.startsWith(c)&&t.endsWith(m)}const g=j(()=>e.expr?h(e.expr,"(",")")?{with:"()",content:e.expr.slice(1,-1)}:h(e.expr,"[","]")?{with:"[]",content:e.expr.slice(1,-1)}:h(e.expr,"{","}")?{with:"{}",content:e.expr.slice(1,-1)}:null:null),l=j(()=>{if(!e.expr)return null;if(!e.expr.includes("_")&&!e.expr.includes("^"))return{base:e.expr,subscript:"",superscript:""};let t="",c="",m="",f=0,s=0,r=0,x=!1,i=!1;for(const p of e.expr){if(p==="}"?s--:p==="{"?s++:p==="]"?r--:p==="["?r++:p===")"?f--:p==="("&&f++,s<0||r<0||f<0)break;if(s===0&&r===0&&f===0){if(p==="_"){x=!0,i=!1;continue}else if(p==="^"){i=!0,x=!1;continue}}x?c+=p:i?m+=p:t+=p}return{base:t,subscript:c,superscript:m}}),n=j(()=>{if(!e.expr)return null;const t=["+","-","*","/","="];if(!t.some(r=>e.expr.includes(r)))return null;let c=0,m=0,f=0,s=-1;for(const r of e.expr){if(s++,r==="}"?m--:r==="{"?m++:r==="]"?f--:r==="["?f++:r===")"?c--:r==="("&&c++,m<0||f<0||c<0)break;if(m===0&&f===0&&c===0&&t.includes(r))return{left:e.expr.slice(0,s).trim(),operator:r,right:e.expr.slice(s+1).trim()}}return null});var o=T(),u=E(o);{var w=t=>{},d=t=>{var c=T(),m=E(c);{var f=r=>{ue(r,{children:(x,i)=>{S(x,{bare:!0,get expr(){return e.expr}})},$$slots:{default:!0}})},s=r=>{var x=T(),i=E(x);{var p=I=>{H(I,{get expr(){return e.expr}})},y=I=>{var C=T(),M=E(C);{var k=L=>{Cr(L,mr(()=>A(g),{children:(V,le)=>{S(V,{bare:!0,get expr(){return A(g).content}})},$$slots:{default:!0}}))},F=L=>{var V=T(),le=E(V);{var ce=J=>{const K=j(()=>{const{left:B,operator:ee,right:re}=A(n);return{left:B,operator:ee,right:re}});var fe=T(),de=E(fe);{var $=B=>{xr(B,{numerator:U=>{S(U,{bare:!0,get expr(){return A(K).left}})},denominator:U=>{S(U,{bare:!0,get expr(){return A(K).right}})}})},q=B=>{Be(B,{get operator(){return A(K).operator},lhs:U=>{S(U,{bare:!0,get expr(){return A(K).left}})},rhs:U=>{S(U,{bare:!0,get expr(){return A(K).right}})}})};D(de,B=>{A(K).operator==="/"?B($):B(q,!1)})}v(J,fe)},_e=J=>{var K=T(),fe=E(K);{var de=$=>{const q=j(()=>{const{base:X,subscript:ae,superscript:ie}=A(l);return{base:X,subscript:ae,superscript:ie}});var B=T(),ee=E(B);{var re=X=>{Ee(X,{sub:Y=>{S(Y,{bare:!0,get expr(){return A(q).subscript}})},sup:Y=>{S(Y,{bare:!0,get expr(){return A(q).superscript}})},children:(Y,Me)=>{S(Y,{bare:!0,get expr(){return A(q).base}})}})},U=X=>{var ae=T(),ie=E(ae);{var Y=Q=>{Ee(Q,{sup:te=>{S(te,{bare:!0,get expr(){return A(q).superscript}})},children:(te,Ce)=>{S(te,{bare:!0,get expr(){return A(q).base}})}})},Me=Q=>{var he=T(),te=E(he);{var Ce=ge=>{Ee(ge,{sub:be=>{S(be,{bare:!0,get expr(){return A(q).subscript}})},children:(be,Wr)=>{S(be,{bare:!0,get expr(){return A(q).base}})}})};D(te,ge=>{A(q).subscript&&ge(Ce)},!0)}v(Q,he)};D(ie,Q=>{A(q).superscript?Q(Y):Q(Me,!1)},!0)}v(X,ae)};D(ee,X=>{A(q).superscript&&A(q).subscript?X(re):X(U,!1)})}v($,B)};D(fe,$=>{A(l)&&$(de)},!0)}v(J,K)};D(le,J=>{A(n)?J(ce):J(_e,!1)},!0)}v(L,V)};D(M,L=>{A(g)?L(k):L(F,!1)},!0)}v(I,C)};D(i,I=>{_.test(e.expr)?I(p):I(y,!1)},!0)}v(r,x)};D(m,r=>{a()?r(s,!1):r(f)},!0)}v(t,c)};D(u,t=>{e.expr?t(d,!1):t(w)})}v(b,o),me()}var Nr=R("<mtd><!></mtd>"),Or=R("<mtr></mtr>"),Pr=R('<mrow><mo fence="true" form="prefix">(</mo> <mtable></mtable> <mo fence="true" form="postfix">)</mo></mrow>');function Re(b,e){oe(e,!0);const a=Fe(e,["$$slots","$$events","$$legacy","columns"]),_=j(()=>Object.entries(a).reduce((l,[n,o],u)=>(u%e.columns===0&&l.push([]),l[l.length-1].push({name:n,snip:o}),l),[]));var h=Pr(),g=W(O(h),2);De(g,21,()=>A(_),l=>l.map(n=>n.name).join("-"),(l,n)=>{var o=Or();De(o,21,()=>A(n),({snip:u,name:w})=>w,(u,w)=>{let d=()=>A(w).snip;var t=Nr(),c=O(t);{var m=s=>{H(s,{get expr(){return d()}})},f=s=>{var r=T(),x=E(r);P(x,d),v(s,r)};D(c,s=>{typeof d()=="string"?s(m):s(f,!1)})}N(t),v(u,t)}),N(o),v(l,o)}),N(g),Ie(2),N(h),v(b,h),me()}var Rr=Ve('<link rel="stylesheet" href="/svelte-mathml/import.css"/>'),Sr=Ve("<!> <!> <p>In <!>, the identity matrix is <!>.</p>",1);function Gr(b){var e=Sr();or(n=>{var o=Rr();v(n,o)});var a=E(e);S(a,{expr:"2*e_x+(e_y-w/2)"});var _=W(a,2);ue(_,{children:(n,o)=>{Re(n,{columns:2,a1:f=>{Z(f,{x:"2",y:"3"})},a2:f=>{Z(f,{x:"5",y:"7"})},b1:f=>{Z(f,{x:"11",y:"13"})},b2:f=>{Z(f,{x:"17",y:"19"})},c1:f=>{Z(f,{x:"23",y:"29"})},c2:f=>{Z(f,{x:"31",y:"37"})},$$slots:{a1:!0,a2:!0,b1:!0,b2:!0,c1:!0,c2:!0}})},$$slots:{default:!0}});var h=W(_,2),g=W(O(h));S(g,{expr:"â^3"});var l=W(g,2);ue(l,{children:(n,o)=>{Be(n,{operator:"=",lhs:"I",rhs:w=>{Re(w,{columns:3,a1:"1",a2:"0",a3:"0",b1:"0",b2:"1",b3:"0",c1:"0",c2:"0",c3:"1"})}})},$$slots:{default:!0}}),Ie(),N(h),v(b,e)}export{Gr as component};
