import"../chunks/DsnmJJEf.js";import"../chunks/CGCn3bKq.js";import{B as we,x as Z,aC as Ge,D as Se,y as Ke,w as Ue,R as D,V as Xe,z as Ye,H as Je,A as Oe,C as ye,L as fe,ak as Qe,aK as Ze,F as De,I as je,G as $e,aH as He,i as er,aN as rr,af as Pe,aj as ar,J as We,K as tr,aR as nr,aS as Ee,ar as Le,aT as sr,aU as lr,ax as ir,aV as vr,aG as fr,aW as ur,Z as or,a7 as _e,p as k,q as E,v,aa as de,aX as S,ab as O,ac as M,a9 as j,ad as R,r as W,aQ as Re,as as Ve,aP as ae,a8 as Fe}from"../chunks/biJyyXgQ.js";import{s as Y,a as mr}from"../chunks/BT25Hi-P.js";import{i as T,p as he,r as qe,s as Ie}from"../chunks/K69qwibN.js";function cr(w,e){return e}function _r(w,e,a){for(var _=w.items,g=[],x=e.length,o=0;o<x;o++)vr(e[o].e,g,!0);var f=x>0&&g.length===0&&a!==null;if(f){var d=a.parentNode;fr(d),d.append(a),_.clear(),K(w,e[0].prev,e[x-1].next)}ur(g,()=>{for(var l=0;l<x;l++){var y=e[l];f||(_.delete(y.k),K(w,y.prev,y.next)),Le(y.e,!f)}})}function Ae(w,e,a,_,g,x=null){var o=w,f={flags:e,items:new Map,first:null};{var d=w;o=Z?we(Ge(d)):d.appendChild(Se())}Z&&Ke();var l=null,y=!1,m=new Map,t=Xe(()=>{var s=a();return er(s)?s:s==null?[]:He(s)}),c,u;function n(){dr(u,c,f,m,o,g,e,_,a),x!==null&&(c.length===0?l?We(l):l=De(()=>x(o)):l!==null&&tr(l,()=>{l=null}))}Ue(()=>{u??=or,c=D(t);var s=c.length;if(y&&s===0)return;y=s===0;let r=!1;if(Z){var h=Ye(o)===Je;h!==(s===0)&&(o=Oe(),we(o),ye(!1),r=!0)}if(Z){for(var i=null,b,p=0;p<s;p++){if(fe.nodeType===Qe&&fe.data===Ze){o=fe,r=!0,ye(!1);break}var I=c[p],N=_(I,p);b=Me(fe,f,i,null,I,N,p,g,e,a),f.items.set(N,b),i=b}s>0&&we(Oe())}if(Z)s===0&&x&&(l=De(()=>x(o)));else if(je()){var C=new Set,A=$e;for(p=0;p<s;p+=1){I=c[p],N=_(I,p);var H=f.items.get(N)??m.get(N);H?ze(H,I,p):(b=Me(null,f,null,null,I,N,p,g,e,a,!0),m.set(N,b)),C.add(N)}for(const[P,L]of f.items)C.has(P)||A.skipped_effects.add(L.e);A.add_callback(n)}else n();r&&ye(!0),D(t)}),Z&&(o=fe)}function dr(w,e,a,_,g,x,o,f,d){var l=e.length,y=a.items,m=a.first,t=m,c,u=null,n=[],s=[],r,h,i,b;for(b=0;b<l;b+=1){if(r=e[b],h=f(r,b),i=y.get(h),i===void 0){var p=_.get(h);if(p!==void 0){_.delete(h),y.set(h,p);var I=u?u.next:t;K(a,u,p),K(a,p,I),ke(p,I,g),u=p}else{var N=t?t.e.nodes_start:g;u=Me(N,a,u,u===null?a.first:u.next,r,h,b,x,o,d)}y.set(h,u),n=[],s=[],t=u.next;continue}if(ze(i,r,b),(i.e.f&Ee)!==0&&We(i.e),i!==t){if(c!==void 0&&c.has(i)){if(n.length<s.length){var C=s[0],A;u=C.prev;var H=n[0],P=n[n.length-1];for(A=0;A<n.length;A+=1)ke(n[A],C,g);for(A=0;A<s.length;A+=1)c.delete(s[A]);K(a,H.prev,P.next),K(a,u,H),K(a,P,C),t=C,u=P,b-=1,n=[],s=[]}else c.delete(i),ke(i,t,g),K(a,i.prev,i.next),K(a,i,u===null?a.first:u.next),K(a,u,i),u=i;continue}for(n=[],s=[];t!==null&&t.k!==h;)(t.e.f&Ee)===0&&(c??=new Set).add(t),s.push(t),t=t.next;if(t===null)continue;i=t}n.push(i),u=i,t=i.next}if(t!==null||c!==void 0){for(var L=c===void 0?[]:He(c);t!==null;)(t.e.f&Ee)===0&&L.push(t),t=t.next;var $=L.length;if($>0){var te=l===0?g:null;_r(a,L,te)}}w.first=a.first&&a.first.e,w.last=u&&u.e;for(var G of _.values())Le(G.e);_.clear()}function ze(w,e,a,_){ar(w.v,e),w.i=a}function Me(w,e,a,_,g,x,o,f,d,l,y){var m=(d&sr)!==0,t=(d&lr)===0,c=m?t?rr(g,!1,!1):Pe(g):g,u=(d&nr)===0?o:Pe(o),n={i:u,v:c,k:x,a:null,e:null,prev:a,next:_};try{if(w===null){var s=document.createDocumentFragment();s.append(w=Se())}return n.e=De(()=>f(w,c,u,l),Z),n.e.prev=a&&a.e,n.e.next=_&&_.e,a===null?y||(e.first=n):(a.next=n,a.e.next=n.e),_!==null&&(_.prev=n,_.e.prev=n.e),n}finally{}}function ke(w,e,a){for(var _=w.next?w.next.e.nodes_start:a,g=e?e.e.nodes_start:a,x=w.e.nodes_start;x!==null&&x!==_;){var o=ir(x);g.before(x),x=o}}function K(w,e,a){e===null?w.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var hr=S("<mn> </mn>"),gr=S("<mi> </mi>");function F(w,e){_e(e,!0);var a=k(),_=E(a);{var g=o=>{var f=hr(),d=O(f,!0);M(f),j(()=>Y(d,e.expr)),v(o,f)},x=o=>{var f=gr(),d=O(f,!0);M(f),j(()=>Y(d,e.expr)),v(o,f)};T(_,o=>{/^\d+$/.test(e.expr)?o(g):o(x,!1)})}v(w,a),de()}var br=S("<mfrac><!> <!></mfrac>");function xr(w,e){var a=br(),_=O(a);{var g=l=>{F(l,{get expr(){return e.numerator}})},x=l=>{var y=k(),m=E(y);W(m,()=>e.numerator),v(l,y)};T(_,l=>{typeof e.numerator=="string"?l(g):l(x,!1)})}var o=R(_,2);{var f=l=>{F(l,{get expr(){return e.denominator}})},d=l=>{var y=k(),m=E(y);W(m,()=>e.denominator),v(l,y)};T(o,l=>{typeof e.denominator=="string"?l(f):l(d,!1)})}M(a),v(w,a)}var pr=S("<mrow><!></mrow>"),wr=S("<math><mrow><!></mrow></math>");function me(w,e){const a=he(e,"bare",3,!1);var _=k(),g=E(_);{var x=f=>{var d=pr(),l=O(d);W(l,()=>e.children),M(d),v(f,d)},o=f=>{var d=wr(),l=O(d),y=O(l);W(y,()=>e.children),M(l),M(d),v(f,d)};T(g,f=>{a()?f(x):f(o,!1)})}v(w,_)}var yr=S("<mo><!></mo>"),Er=S("<!> <!> <!>",1);function Be(w,e){var a=Er(),_=E(a);{var g=m=>{F(m,{get expr(){return e.lhs}})},x=m=>{var t=k(),c=E(t);W(c,()=>e.lhs),v(m,t)};T(_,m=>{typeof e.lhs=="string"?m(g):m(x,!1)})}var o=R(_,2);{var f=m=>{var t=yr(),c=O(t);{var u=s=>{var r=Re("Â·");v(s,r)},n=s=>{var r=Re();j(()=>Y(r,e.operator)),v(s,r)};T(c,s=>{e.operator==="*"?s(u):s(n,!1)})}M(t),v(m,t)};T(o,m=>{e.operator&&m(f)})}var d=R(o,2);{var l=m=>{F(m,{get expr(){return e.rhs}})},y=m=>{var t=k(),c=E(t);W(c,()=>e.rhs),v(m,t)};T(d,m=>{typeof e.rhs=="string"?m(l):m(y,!1)})}v(w,a)}var kr=S("<msubsup><!> <!> <!></msubsup>"),Tr=S("<msup><!> <!></msup>"),Dr=S("<msub><!> <!></msub>");function Te(w,e){var a=k(),_=E(a);{var g=o=>{var f=kr(),d=O(f);{var l=r=>{var h=k(),i=E(h);W(i,()=>e.children),v(r,h)},y=r=>{var h=k(),i=E(h);{var b=p=>{F(p,{get expr(){return e.base}})};T(i,p=>{e.base&&p(b)},!0)}v(r,h)};T(d,r=>{e.children?r(l):r(y,!1)})}var m=R(d,2);{var t=r=>{F(r,{get expr(){return e.sub}})},c=r=>{var h=k(),i=E(h);W(i,()=>e.sub),v(r,h)};T(m,r=>{typeof e.sub=="string"?r(t):r(c,!1)})}var u=R(m,2);{var n=r=>{F(r,{get expr(){return e.sup}})},s=r=>{var h=k(),i=E(h);W(i,()=>e.sup),v(r,h)};T(u,r=>{typeof e.sup=="string"?r(n):r(s,!1)})}M(f),v(o,f)},x=o=>{var f=k(),d=E(f);{var l=m=>{var t=Tr(),c=O(t);{var u=i=>{var b=k(),p=E(b);W(p,()=>e.children),v(i,b)},n=i=>{var b=k(),p=E(b);{var I=N=>{F(N,{get expr(){return e.base}})};T(p,N=>{e.base&&N(I)},!0)}v(i,b)};T(c,i=>{e.children?i(u):i(n,!1)})}var s=R(c,2);{var r=i=>{F(i,{get expr(){return e.sup}})},h=i=>{var b=k(),p=E(b);W(p,()=>e.sup),v(i,b)};T(s,i=>{typeof e.sup=="string"?i(r):i(h,!1)})}M(t),v(m,t)},y=m=>{var t=k(),c=E(t);{var u=s=>{var r=Dr(),h=O(r);{var i=C=>{var A=k(),H=E(A);W(H,()=>e.children),v(C,A)},b=C=>{var A=k(),H=E(A);{var P=L=>{F(L,{get expr(){return e.base}})};T(H,L=>{e.base&&L(P)},!0)}v(C,A)};T(h,C=>{e.children?C(i):C(b,!1)})}var p=R(h,2);{var I=C=>{F(C,{get expr(){return e.sub}})},N=C=>{var A=k(),H=E(A);W(H,()=>e.sub),v(C,A)};T(p,C=>{typeof e.sub=="string"?C(I):C(N,!1)})}M(r),v(s,r)},n=s=>{var r=k(),h=E(r);{var i=p=>{var I=k(),N=E(I);W(N,()=>e.children),v(p,I)},b=p=>{var I=k(),N=E(I);{var C=A=>{F(A,{get expr(){return e.base}})};T(N,A=>{e.base&&A(C)},!0)}v(p,I)};T(h,p=>{e.children?p(i):p(b,!1)},!0)}v(s,r)};T(c,s=>{e.sub?s(u):s(n,!1)},!0)}v(m,t)};T(d,m=>{e.sup?m(l):m(y,!1)},!0)}v(o,f)};T(_,o=>{e.sub&&e.sup?o(g):o(x,!1)})}v(w,a)}var Ir=S('<mtr><mtd style="padding-left:0em;padding-right:0em;"><!></mtd></mtr>'),Ar=S('<math display="block" class="tml-display" style="display:block math;"><mrow><mo fence="true" form="prefix">(</mo> <mtable></mtable> <mo fence="true" form="postfix">)</mo></mrow></math>');function re(w,e){const a=qe(e,["$$slots","$$events","$$legacy"]);var _=Ar(),g=O(_),x=R(O(g),2);Ae(x,21,()=>Object.values(a),cr,(o,f)=>{var d=Ir(),l=O(d),y=O(l);me(y,{bare:!0,children:(m,t)=>{var c=k(),u=E(c);{var n=r=>{F(r,{get expr(){return D(f)}})},s=r=>{var h=k(),i=E(h);W(i,()=>D(f)),v(r,h)};T(u,r=>{typeof D(f)=="string"?r(n):r(s,!1)})}v(m,c)},$$slots:{default:!0}}),M(l),M(d),v(o,d)}),M(x),Ve(2),M(g),M(_),v(w,_)}var Mr=S('<mrow><mo fence="true" form="prefix"> </mo> <!> <mo fence="true" form="postfix"> </mo></mrow>');function Cr(w,e){_e(e,!0);const a=he(e,"with",3,"()");var _=Mr(),g=O(_),x=O(g,!0);M(g);var o=R(g,2);W(o,()=>e.children);var f=R(o,2),d=O(f,!0);M(f),M(_),j(()=>{Y(x,a()[0]),Y(d,a()[1])}),v(w,_),de()}function V(w,e){_e(e,!0);const a=he(e,"bare",3,!1),_=/^([\p{Letter}0-9]+)$/u;function g(t,c,u){return t.startsWith(c)&&t.endsWith(u)}const x=ae(()=>e.expr?g(e.expr,"(",")")?{with:"()",content:e.expr.slice(1,-1)}:g(e.expr,"[","]")?{with:"[]",content:e.expr.slice(1,-1)}:g(e.expr,"{","}")?{with:"{}",content:e.expr.slice(1,-1)}:null:null),o=ae(()=>{if(!e.expr)return null;if(!e.expr.includes("_")&&!e.expr.includes("^"))return{base:e.expr,subscript:"",superscript:""};let t="",c="",u="",n=0,s=0,r=0,h=!1,i=!1;for(const b of e.expr){if(b==="}"?s--:b==="{"?s++:b==="]"?r--:b==="["?r++:b===")"?n--:b==="("&&n++,s<0||r<0||n<0)break;if(s===0&&r===0&&n===0){if(b==="_"){h=!0,i=!1;continue}else if(b==="^"){i=!0,h=!1;continue}}h?c+=b:i?u+=b:t+=b}return{base:t,subscript:c,superscript:u}}),f=ae(()=>{if(!e.expr)return null;const t=["+","-","*","/","="];if(!t.some(r=>e.expr.includes(r)))return null;let c=0,u=0,n=0,s=-1;for(const r of e.expr){if(s++,r==="}"?u--:r==="{"?u++:r==="]"?n--:r==="["?n++:r===")"?c--:r==="("&&c++,u<0||n<0||c<0)break;if(u===0&&n===0&&c===0&&t.includes(r))return{left:e.expr.slice(0,s).trim(),operator:r,right:e.expr.slice(s+1).trim()}}return null});var d=k(),l=E(d);{var y=t=>{},m=t=>{var c=k(),u=E(c);{var n=r=>{me(r,{children:(h,i)=>{V(h,{bare:!0,get expr(){return e.expr}})},$$slots:{default:!0}})},s=r=>{var h=k(),i=E(h);{var b=I=>{F(I,{get expr(){return e.expr}})},p=I=>{var N=k(),C=E(N);{var A=P=>{Cr(P,Ie(()=>D(x),{children:(L,$)=>{V(L,{bare:!0,get expr(){return D(x).content}})},$$slots:{default:!0}}))},H=P=>{var L=k(),$=E(L);{var te=U=>{const z=ae(()=>{const{left:B,operator:se,right:le}=D(f);return{left:B,operator:se,right:le}});var ue=k(),ge=E(ue);{var ne=B=>{xr(B,{numerator:X=>{V(X,{bare:!0,get expr(){return D(z).left}})},denominator:X=>{V(X,{bare:!0,get expr(){return D(z).right}})}})},q=B=>{Be(B,{get operator(){return D(z).operator},lhs:X=>{V(X,{bare:!0,get expr(){return D(z).left}})},rhs:X=>{V(X,{bare:!0,get expr(){return D(z).right}})}})};T(ge,B=>{D(z).operator==="/"?B(ne):B(q,!1)})}v(U,ue)},G=U=>{var z=k(),ue=E(z);{var ge=ne=>{const q=ae(()=>{const{base:J,subscript:ie,superscript:oe}=D(o);return{base:J,subscript:ie,superscript:oe}});var B=k(),se=E(B);{var le=J=>{Te(J,{sub:Q=>{V(Q,{bare:!0,get expr(){return D(q).subscript}})},sup:Q=>{V(Q,{bare:!0,get expr(){return D(q).superscript}})},children:(Q,Ce)=>{V(Q,{bare:!0,get expr(){return D(q).base}})}})},X=J=>{var ie=k(),oe=E(ie);{var Q=ee=>{Te(ee,{sup:ve=>{V(ve,{bare:!0,get expr(){return D(q).superscript}})},children:(ve,Ne)=>{V(ve,{bare:!0,get expr(){return D(q).base}})}})},Ce=ee=>{var be=k(),ve=E(be);{var Ne=xe=>{Te(xe,{sub:pe=>{V(pe,{bare:!0,get expr(){return D(q).subscript}})},children:(pe,Vr)=>{V(pe,{bare:!0,get expr(){return D(q).base}})}})};T(ve,xe=>{D(q).subscript&&xe(Ne)},!0)}v(ee,be)};T(oe,ee=>{D(q).superscript?ee(Q):ee(Ce,!1)},!0)}v(J,ie)};T(se,J=>{D(q).superscript&&D(q).subscript?J(le):J(X,!1)})}v(ne,B)};T(ue,ne=>{D(o)&&ne(ge)},!0)}v(U,z)};T($,U=>{D(f)?U(te):U(G,!1)},!0)}v(P,L)};T(C,P=>{D(x)?P(A):P(H,!1)},!0)}v(I,N)};T(i,I=>{_.test(e.expr)?I(b):I(p,!1)},!0)}v(r,h)};T(u,r=>{a()?r(s,!1):r(n)},!0)}v(t,c)};T(l,t=>{e.expr?t(m,!1):t(y)})}v(w,d),de()}var Nr=S('<mmultiscripts><ms style="rotate: -90deg; font-size: 0.65em; margin-right: -0.75em;"> </ms> <mprescripts></mprescripts> <!></mmultiscripts>'),Or=S("<mover><!> <ms> </ms></mover>"),Pr=S("<mtd><!></mtd>"),Rr=S("<mtr></mtr>"),Sr=S('<mrow><mo fence="true" form="prefix"> </mo> <mtable></mtable> <mo fence="true" form="postfix"> </mo></mrow>');function ce(w,e){_e(e,!0);const a=he(e,"brackets",3,"()"),_=qe(e,["$$slots","$$events","$$legacy","columns","brackets","height","width"]),g=ae(()=>Object.entries(_).reduce((l,[y,m],t)=>(t%e.columns===0&&l.push([]),l[l.length-1].push({name:y,snip:m}),l),[]));var x=k(),o=E(x);{var f=l=>{var y=Nr(),m=O(y),t=O(m,!0);M(m);var c=R(m,4);ce(c,Ie({get columns(){return e.columns},get brackets(){return a()},get width(){return e.width}},()=>_)),M(y),j(()=>Y(t,e.height)),v(l,y)},d=l=>{var y=k(),m=E(y);{var t=u=>{var n=Or(),s=O(n);ce(s,Ie({get columns(){return e.columns},get brackets(){return a()}},()=>_));var r=R(s,2),h=O(r,!0);M(r),M(n),j(()=>Y(h,e.width)),v(u,n)},c=u=>{var n=Sr(),s=O(n),r=O(s,!0);M(s);var h=R(s,2);Ae(h,21,()=>D(g),p=>p.map(I=>I.name).join("-"),(p,I)=>{var N=Rr();Ae(N,21,()=>D(I),({snip:C,name:A})=>A,(C,A)=>{let H=()=>D(A).snip;var P=Pr(),L=O(P);{var $=G=>{F(G,{get expr(){return H()}})},te=G=>{var U=k(),z=E(U);W(z,H),v(G,U)};T(L,G=>{typeof H()=="string"?G($):G(te,!1)})}M(P),v(C,P)}),M(N),v(p,N)}),M(h);var i=R(h,2),b=O(i,!0);M(i),M(n),j(()=>{Y(r,a()[0]),Y(b,a()[1])}),v(u,n)};T(m,u=>{e.width?u(t):u(c,!1)},!0)}v(l,y)};T(o,l=>{e.height?l(f):l(d,!1)})}v(w,x),de()}var Hr=Fe('<link rel="stylesheet" href="/svelte-mathml/import.css"/>'),Wr=Fe("<!> <!> <p>In <!>, the identity matrix is <!>.</p>",1);function Kr(w){var e=Wr();mr(f=>{var d=Hr();v(f,d)});var a=E(e);V(a,{expr:"2*e_x+(e_y-w/2)"});var _=R(a,2);me(_,{children:(f,d)=>{ce(f,{columns:2,a1:n=>{re(n,{x:"2",y:"3"})},a2:n=>{re(n,{x:"5",y:"7"})},b1:n=>{re(n,{x:"11",y:"13"})},b2:n=>{re(n,{x:"17",y:"19"})},c1:n=>{re(n,{x:"23",y:"29"})},c2:n=>{re(n,{x:"31",y:"37"})},$$slots:{a1:!0,a2:!0,b1:!0,b2:!0,c1:!0,c2:!0}})},$$slots:{default:!0}});var g=R(_,2),x=R(O(g));V(x,{expr:"â^3"});var o=R(x,2);me(o,{children:(f,d)=>{Be(f,{operator:"=",lhs:"I",rhs:y=>{ce(y,{brackets:"[]",columns:3,height:"Input",width:"Output",a1:"1",a2:"0",a3:"0",b1:"0",b2:"1",b3:"0",c1:"0",c2:"0",c3:"1"})}})},$$slots:{default:!0}}),Ve(),M(g),v(w,e)}export{Kr as component};
