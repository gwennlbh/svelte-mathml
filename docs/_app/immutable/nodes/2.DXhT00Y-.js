import"../chunks/DsnmJJEf.js";import"../chunks/DqU7F50S.js";import{a7 as le,p as i,q as s,v as t,aa as oe,aQ as z,ab as Q,ac as T,a9 as ne,ad as G,r as A,aP as ge,O as _,aO as ee}from"../chunks/BZ1uZZTz.js";import{i as f,p as be,s as he}from"../chunks/CHoj01x6.js";import{s as re}from"../chunks/DsGD2Z8O.js";var pe=z("<mn> </mn>"),we=z("<mi> </mi>");function F(P,e){le(e,!0);var g=i(),p=s(g);{var W=o=>{var m=pe(),w=Q(m,!0);T(m),ne(()=>re(w,e.expr)),t(o,m)},L=o=>{var m=we(),w=Q(m,!0);T(m),ne(()=>re(w,e.expr)),t(o,m)};f(p,o=>{/^\d+$/.test(e.expr)?o(W):o(L,!1)})}t(P,g),oe()}var ye=z("<mfrac><!> <!></mfrac>");function ke(P,e){var g=ye(),p=Q(g);{var W=b=>{F(b,{get expr(){return e.numerator}})},L=b=>{var q=i(),y=s(q);A(y,()=>e.numerator),t(b,q)};f(p,b=>{typeof e.numerator=="string"?b(W):b(L,!1)})}var o=G(p,2);{var m=b=>{F(b,{get expr(){return e.denominator}})},w=b=>{var q=i(),y=s(q);A(y,()=>e.denominator),t(b,q)};f(o,b=>{typeof e.denominator=="string"?b(m):b(w,!1)})}T(g),t(P,g)}var De=z("<mrow><!></mrow>");function Pe(P,e){var g=De(),p=Q(g);A(p,()=>e.children),T(g),t(P,g)}var We=z("<!> <mo><!></mo> <!>",1);function Oe(P,e){var g=We(),p=s(g);{var W=a=>{F(a,{get expr(){return e.lhs}})},L=a=>{var l=i(),x=s(l);A(x,()=>e.lhs),t(a,l)};f(p,a=>{typeof e.lhs=="string"?a(W):a(L,!1)})}var o=G(p,2),m=Q(o);{var w=a=>{var l=ge("Â·");t(a,l)},b=a=>{var l=ge();ne(()=>re(l,e.operator)),t(a,l)};f(m,a=>{e.operator==="*"?a(w):a(b,!1)})}T(o);var q=G(o,2);{var y=a=>{F(a,{get expr(){return e.rhs}})},c=a=>{var l=i(),x=s(l);A(x,()=>e.rhs),t(a,l)};f(q,a=>{typeof e.rhs=="string"?a(y):a(c,!1)})}t(P,g)}var Se=z("<msubsup><!> <!> <!></msubsup>"),Ae=z("<msup><!> <!></msup>"),Le=z("<msub><!> <!></msub>");function ve(P,e){var g=i(),p=s(g);{var W=o=>{var m=Se(),w=Q(m);{var b=r=>{var v=i(),n=s(v);A(n,()=>e.children),t(r,v)},q=r=>{var v=i(),n=s(v);{var u=h=>{F(h,{get expr(){return e.base}})};f(n,h=>{e.base&&h(u)},!0)}t(r,v)};f(w,r=>{e.children?r(b):r(q,!1)})}var y=G(w,2);{var c=r=>{F(r,{get expr(){return e.sub}})},a=r=>{var v=i(),n=s(v);A(n,()=>e.sub),t(r,v)};f(y,r=>{typeof e.sub=="string"?r(c):r(a,!1)})}var l=G(y,2);{var x=r=>{F(r,{get expr(){return e.sup}})},d=r=>{var v=i(),n=s(v);A(n,()=>e.sup),t(r,v)};f(l,r=>{typeof e.sup=="string"?r(x):r(d,!1)})}T(m),t(o,m)},L=o=>{var m=i(),w=s(m);{var b=y=>{var c=Ae(),a=Q(c);{var l=n=>{var u=i(),h=s(u);A(h,()=>e.children),t(n,u)},x=n=>{var u=i(),h=s(u);{var D=M=>{F(M,{get expr(){return e.base}})};f(h,M=>{e.base&&M(D)},!0)}t(n,u)};f(a,n=>{e.children?n(l):n(x,!1)})}var d=G(a,2);{var r=n=>{F(n,{get expr(){return e.sup}})},v=n=>{var u=i(),h=s(u);A(h,()=>e.sup),t(n,u)};f(d,n=>{typeof e.sup=="string"?n(r):n(v,!1)})}T(c),t(y,c)},q=y=>{var c=i(),a=s(c);{var l=d=>{var r=Le(),v=Q(r);{var n=k=>{var O=i(),K=s(O);A(K,()=>e.children),t(k,O)},u=k=>{var O=i(),K=s(O);{var H=I=>{F(I,{get expr(){return e.base}})};f(K,I=>{e.base&&I(H)},!0)}t(k,O)};f(v,k=>{e.children?k(n):k(u,!1)})}var h=G(v,2);{var D=k=>{F(k,{get expr(){return e.sub}})},M=k=>{var O=i(),K=s(O);A(K,()=>e.sub),t(k,O)};f(h,k=>{typeof e.sub=="string"?k(D):k(M,!1)})}T(r),t(d,r)},x=d=>{var r=i(),v=s(r);{var n=h=>{var D=i(),M=s(D);A(M,()=>e.children),t(h,D)},u=h=>{var D=i(),M=s(D);{var k=O=>{F(O,{get expr(){return e.base}})};f(M,O=>{e.base&&O(k)},!0)}t(h,D)};f(v,h=>{e.children?h(n):h(u,!1)},!0)}t(d,r)};f(a,d=>{e.sub?d(l):d(x,!1)},!0)}t(y,c)};f(w,y=>{e.sup?y(b):y(q,!1)},!0)}t(o,m)};f(p,o=>{e.sub&&e.sup?o(W):o(L,!1)})}t(P,g)}var qe=z('<mrow><mo fence="true" form="prefix"> </mo> <!> <mo fence="true" form="postfix"> </mo></mrow>');function Ee(P,e){le(e,!0);const g=be(e,"with",3,"()");var p=qe(),W=Q(p),L=Q(W,!0);T(W);var o=G(W,2);A(o,()=>e.children);var m=G(o,2),w=Q(m,!0);T(m),T(p),ne(()=>{re(L,g()[0]),re(w,g()[1])}),t(P,p),oe()}var Fe=z("<math><!></math>");function S(P,e){le(e,!0);const g=be(e,"bare",3,!1),p=/^([\p{Letter}0-9]+)$/u;function W(c,a,l){return c.startsWith(a)&&c.endsWith(l)}const L=ee(()=>e.expr?W(e.expr,"(",")")?{with:"()",content:e.expr.slice(1,-1)}:W(e.expr,"[","]")?{with:"[]",content:e.expr.slice(1,-1)}:W(e.expr,"{","}")?{with:"{}",content:e.expr.slice(1,-1)}:null:null),o=ee(()=>{if(!e.expr)return null;if(!e.expr.includes("_")&&!e.expr.includes("^"))return{base:e.expr,subscript:"",superscript:""};let c="",a="",l="",x=0,d=0,r=0,v=!1,n=!1;for(const u of e.expr){if(u==="}"?d--:u==="{"?d++:u==="]"?r--:u==="["?r++:u===")"?x--:u==="("&&x++,d<0||r<0||x<0)break;if(d===0&&r===0&&x===0){if(u==="_"){v=!0,n=!1;continue}else if(u==="^"){n=!0,v=!1;continue}}v?a+=u:n?l+=u:c+=u}return{base:c,subscript:a,superscript:l}}),m=ee(()=>{if(!e.expr)return null;const c=["+","-","*","/","="];if(!c.some(r=>e.expr.includes(r)))return null;let a=0,l=0,x=0,d=-1;for(const r of e.expr){if(d++,r==="}"?l--:r==="{"?l++:r==="]"?x--:r==="["?x++:r===")"?a--:r==="("&&a++,l<0||x<0||a<0)break;if(l===0&&x===0&&a===0&&c.includes(r))return{left:e.expr.slice(0,d).trim(),operator:r,right:e.expr.slice(d+1).trim()}}return null});var w=i(),b=s(w);{var q=c=>{},y=c=>{var a=i(),l=s(a);{var x=r=>{var v=Fe(),n=Q(v);Pe(n,{children:(u,h)=>{S(u,{bare:!0,get expr(){return e.expr}})}}),T(v),t(r,v)},d=r=>{var v=i(),n=s(v);{var u=D=>{F(D,{get expr(){return e.expr}})},h=D=>{var M=i(),k=s(M);{var O=H=>{Ee(H,he(()=>_(L),{children:(I,ce)=>{S(I,{bare:!0,get expr(){return _(L).content}})},$$slots:{default:!0}}))},K=H=>{var I=i(),ce=s(I);{var xe=R=>{const B=ee(()=>{const{left:j,operator:X,right:Y}=_(m);return{left:j,operator:X,right:Y}});var te=i(),se=s(te);{var V=j=>{ke(j,{numerator:C=>{S(C,{bare:!0,get expr(){return _(B).left}})},denominator:C=>{S(C,{bare:!0,get expr(){return _(B).right}})}})},E=j=>{Oe(j,{get operator(){return _(B).operator},lhs:C=>{S(C,{bare:!0,get expr(){return _(B).left}})},rhs:C=>{S(C,{bare:!0,get expr(){return _(B).right}})}})};f(se,j=>{_(B).operator==="/"?j(V):j(E,!1)})}t(R,te)},de=R=>{var B=i(),te=s(B);{var se=V=>{const E=ee(()=>{const{base:J,subscript:Z,superscript:ae}=_(o);return{base:J,subscript:Z,superscript:ae}});var j=i(),X=s(j);{var Y=J=>{ve(J,{sub:N=>{S(N,{bare:!0,get expr(){return _(E).subscript}})},sup:N=>{S(N,{bare:!0,get expr(){return _(E).superscript}})},children:(N,me)=>{S(N,{bare:!0,get expr(){return _(E).base}})}})},C=J=>{var Z=i(),ae=s(Z);{var N=U=>{ve(U,{sup:$=>{S($,{bare:!0,get expr(){return _(E).superscript}})},children:($,_e)=>{S($,{bare:!0,get expr(){return _(E).base}})}})},me=U=>{var ie=i(),$=s(ie);{var _e=fe=>{ve(fe,{sub:ue=>{S(ue,{bare:!0,get expr(){return _(E).subscript}})},children:(ue,Qe)=>{S(ue,{bare:!0,get expr(){return _(E).base}})}})};f($,fe=>{_(E).subscript&&fe(_e)},!0)}t(U,ie)};f(ae,U=>{_(E).superscript?U(N):U(me,!1)},!0)}t(J,Z)};f(X,J=>{_(E).superscript&&_(E).subscript?J(Y):J(C,!1)})}t(V,j)};f(te,V=>{_(o)&&V(se)},!0)}t(R,B)};f(ce,R=>{_(m)?R(xe):R(de,!1)},!0)}t(H,I)};f(k,H=>{_(L)?H(O):H(K,!1)},!0)}t(D,M)};f(n,D=>{p.test(e.expr)?D(u):D(h,!1)},!0)}t(r,v)};f(l,r=>{g()?r(d,!1):r(x)},!0)}t(c,a)};f(b,c=>{e.expr?c(y,!1):c(q)})}t(P,w),oe()}function Ge(P){S(P,{expr:"2*e_x+(e_y-w/2)"})}export{Ge as component};
